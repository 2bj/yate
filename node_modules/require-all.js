var fs_ = require('fs');
var path_ = require('path');

//  Use it:
//
//      var requireAll = require('./require-all.js');
//      requireAll('modules');
//      requireAll('modules', /\.module\.js$/);
//
module.exports = function requireAll(dir, regexp) {
    fs_.readdirSync(dir).forEach(function(filename) {
        if ( /\.js$/ && ( !regexp || regexp.test(filename) ) ) {
            var path;
            if ( /^\//.test(dir) ) {
                //  Absolute path to dir.
                path = path_.join(dir, filename);
            } else {
                path = path_.join(__dirname, dir, filename);
            }

            require(path);
        }
    });
};

